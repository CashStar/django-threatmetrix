TODO
====

Figure out how to unit test this